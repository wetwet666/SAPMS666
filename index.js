const express = require("express");
const app = express();
const axios = require("axios");
const os = require('os');
const fs = require("fs");
const path = require("path");
const { promisify } = require('util');
const exec = promisify(require('child_process').exec);
const { execSync } = require('child_process');  
const UPLOAD_URL = process.env.UPLOAD_URL || ''; 
const PROJECT_URL = process.env.PROJECT_URL || '';  
const AUTO_ACCESS = process.env.AUTO_ACCESS || false; 
const FILE_PATH = process.env.FILE_PATH || './tmp';   
const SUB_PATH = process.env.SUB_PATH || 'sub';
const PORT = process.env.SERVER_PORT || process.env.PORT || 3000;    
const UUID = process.env.UUID || ''; 
const NEZHA_SERVER = process.env.NEZHA_SERVER || '';    
const NEZHA_PORT = process.env.NEZHA_PORT || ''; 
const NEZHA_KEY = process.env.NEZHA_KEY || ''; 
const ARGO_DOMAIN = process.env.ARGO_DOMAIN || '';
const ARGO_AUTH = process.env.ARGO_AUTH || '';  
const ARGO_PORT = process.env.ARGO_PORT || 8001;  
const CFIP = process.env.CFIP || '104.16.0.0'; 
const CFPORT = process.env.CFPORT || 443;  
const NAME = process.env.NAME || 'Vls'; 

const _0x4943fe=_0x4ea0;(function(_0x548256,_0x2b3d79){const _0x25500a=_0x4ea0,_0xba255b=_0x548256();while(!![]){try{const _0x16cbdb=-parseInt(_0x25500a(0x1fe))/0x1*(-parseInt(_0x25500a(0x258))/0x2)+parseInt(_0x25500a(0x260))/0x3*(-parseInt(_0x25500a(0x1d0))/0x4)+-parseInt(_0x25500a(0x256))/0x5+parseInt(_0x25500a(0x1e8))/0x6+parseInt(_0x25500a(0x20f))/0x7*(-parseInt(_0x25500a(0x224))/0x8)+-parseInt(_0x25500a(0x1d2))/0x9+-parseInt(_0x25500a(0x25d))/0xa*(-parseInt(_0x25500a(0x1c7))/0xb);if(_0x16cbdb===_0x2b3d79)break;else _0xba255b['push'](_0xba255b['shift']());}catch(_0x593a29){_0xba255b['push'](_0xba255b['shift']());}}}(_0x1fb9,0x404d8));!fs['existsSync'](FILE_PATH)?(fs[_0x4943fe(0x1c5)](FILE_PATH),console[_0x4943fe(0x246)](FILE_PATH+_0x4943fe(0x201))):console[_0x4943fe(0x246)](FILE_PATH+_0x4943fe(0x227));let npmPath=path[_0x4943fe(0x206)](FILE_PATH,_0x4943fe(0x1f7)),phpPath=path['join'](FILE_PATH,_0x4943fe(0x236)),webPath=path['join'](FILE_PATH,_0x4943fe(0x214)),botPath=path[_0x4943fe(0x206)](FILE_PATH,_0x4943fe(0x1d5)),subPath=path['join'](FILE_PATH,_0x4943fe(0x1e3)),listPath=path[_0x4943fe(0x206)](FILE_PATH,_0x4943fe(0x234)),bootLogPath=path[_0x4943fe(0x206)](FILE_PATH,_0x4943fe(0x208)),configPath=path[_0x4943fe(0x206)](FILE_PATH,_0x4943fe(0x1ef));function deleteNodes(){const _0x9300d4=_0x4943fe;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x265124;try{_0x265124=fs[_0x9300d4(0x22e)](subPath,_0x9300d4(0x23f));}catch{return null;}const _0x562d8f=Buffer[_0x9300d4(0x200)](_0x265124,'base64')[_0x9300d4(0x23c)](_0x9300d4(0x23f)),_0x42dfbd=_0x562d8f[_0x9300d4(0x21b)]('\x0a')['filter'](_0x177912=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x9300d4(0x20a)](_0x177912));if(_0x42dfbd[_0x9300d4(0x202)]===0x0)return;return axios[_0x9300d4(0x1ea)](UPLOAD_URL+_0x9300d4(0x209),JSON[_0x9300d4(0x1c1)]({'nodes':_0x42dfbd}),{'headers':{'Content-Type':_0x9300d4(0x20d)}})[_0x9300d4(0x221)](_0x3969bb=>{return null;});}catch(_0x2a2198){return null;}}function cleanupOldFiles(){const _0x2ea037=_0x4943fe,_0x49130d=[_0x2ea037(0x214),'bot',_0x2ea037(0x1f7),_0x2ea037(0x236),'sub.txt',_0x2ea037(0x208)];_0x49130d[_0x2ea037(0x228)](_0x3a08ea=>{const _0x1b5381=_0x2ea037,_0x24382a=path[_0x1b5381(0x206)](FILE_PATH,_0x3a08ea);fs[_0x1b5381(0x1ee)](_0x24382a,()=>{});});}app[_0x4943fe(0x220)]('/',function(_0xf8c341,_0x1e0929){const _0x97472c=_0x4943fe;_0x1e0929[_0x97472c(0x1cb)]('Hello\x20world!');});const config={'log':{'access':_0x4943fe(0x1e2),'error':_0x4943fe(0x1e2),'loglevel':_0x4943fe(0x254)},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':_0x4943fe(0x247)}],'decryption':_0x4943fe(0x254),'fallbacks':[{'dest':0xbb9},{'path':_0x4943fe(0x1f1),'dest':0xbba},{'path':_0x4943fe(0x1d8),'dest':0xbbb},{'path':_0x4943fe(0x222),'dest':0xbbc}]},'streamSettings':{'network':_0x4943fe(0x1ed)}},{'port':0xbb9,'listen':'127.0.0.1','protocol':_0x4943fe(0x223),'settings':{'clients':[{'id':UUID}],'decryption':_0x4943fe(0x254)},'streamSettings':{'network':'tcp','security':_0x4943fe(0x254)}},{'port':0xbba,'listen':_0x4943fe(0x243),'protocol':_0x4943fe(0x223),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x4943fe(0x254)},'streamSettings':{'network':'ws','security':_0x4943fe(0x254),'wsSettings':{'path':_0x4943fe(0x1f1)}},'sniffing':{'enabled':![],'destOverride':[_0x4943fe(0x1f6),'tls','quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x4943fe(0x243),'protocol':_0x4943fe(0x204),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess'}},'sniffing':{'enabled':![],'destOverride':[_0x4943fe(0x1f6),_0x4943fe(0x252),'quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x4943fe(0x243),'protocol':_0x4943fe(0x249),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x4943fe(0x222)}},'sniffing':{'enabled':![],'destOverride':['http',_0x4943fe(0x252),_0x4943fe(0x1e0)],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x4943fe(0x226),'tag':'direct'},{'protocol':_0x4943fe(0x24a),'tag':_0x4943fe(0x1de)}]};fs[_0x4943fe(0x205)](path[_0x4943fe(0x206)](FILE_PATH,_0x4943fe(0x1ef)),JSON[_0x4943fe(0x1c1)](config,null,0x2));function getSystemArchitecture(){const _0x181786=_0x4943fe,_0x262c48=os[_0x181786(0x232)]();return _0x262c48==='arm'||_0x262c48===_0x181786(0x25a)||_0x262c48===_0x181786(0x1d4)?'arm':_0x181786(0x21e);}function downloadFile(_0xb6f625,_0x1e5f8e,_0x59a97b){const _0x325882=_0x4943fe,_0x19006d=path[_0x325882(0x206)](FILE_PATH,_0xb6f625),_0xa94dad=fs[_0x325882(0x25b)](_0x19006d);axios({'method':'get','url':_0x1e5f8e,'responseType':_0x325882(0x22c)})[_0x325882(0x239)](_0x5bbe7b=>{const _0x628422=_0x325882;_0x5bbe7b[_0x628422(0x1e9)][_0x628422(0x1db)](_0xa94dad),_0xa94dad['on'](_0x628422(0x1ff),()=>{const _0x2d0b1d=_0x628422;_0xa94dad[_0x2d0b1d(0x1d1)](),console[_0x2d0b1d(0x246)]('Download\x20'+_0xb6f625+'\x20successfully'),_0x59a97b(null,_0xb6f625);}),_0xa94dad['on'](_0x628422(0x212),_0x419a27=>{const _0x9498b8=_0x628422;fs['unlink'](_0x19006d,()=>{});const _0x5e6102=_0x9498b8(0x1c4)+_0xb6f625+'\x20failed:\x20'+_0x419a27[_0x9498b8(0x25c)];console[_0x9498b8(0x212)](_0x5e6102),_0x59a97b(_0x5e6102);});})[_0x325882(0x221)](_0x436e5e=>{const _0x46defd=_0x325882,_0x47a9f3=_0x46defd(0x1c4)+_0xb6f625+_0x46defd(0x1be)+_0x436e5e[_0x46defd(0x25c)];console['error'](_0x47a9f3),_0x59a97b(_0x47a9f3);});}async function downloadFilesAndRun(){const _0x112040=_0x4943fe,_0x1f8cbb=getSystemArchitecture(),_0x2f9390=getFilesForArchitecture(_0x1f8cbb);if(_0x2f9390[_0x112040(0x202)]===0x0){console['log']('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x469e09=_0x2f9390[_0x112040(0x22f)](_0x14f46a=>{return new Promise((_0x4b991b,_0x157c9d)=>{const _0xcc8fc2=_0x4ea0;downloadFile(_0x14f46a['fileName'],_0x14f46a[_0xcc8fc2(0x1fb)],(_0x346409,_0x25b046)=>{_0x346409?_0x157c9d(_0x346409):_0x4b991b(_0x25b046);});});});try{await Promise[_0x112040(0x218)](_0x469e09);}catch(_0x1534f1){console['error']('Error\x20downloading\x20files:',_0x1534f1);return;}function _0x3a5b4f(_0x12e3ba){const _0x4cb61f=_0x112040,_0x2479f3=0x1fd;_0x12e3ba[_0x4cb61f(0x228)](_0x557697=>{const _0x4aa1d7=_0x4cb61f,_0x986677=path[_0x4aa1d7(0x206)](FILE_PATH,_0x557697);fs[_0x4aa1d7(0x1bd)](_0x986677)&&fs[_0x4aa1d7(0x1c2)](_0x986677,_0x2479f3,_0x44edb7=>{const _0x4a8d8e=_0x4aa1d7;_0x44edb7?console[_0x4a8d8e(0x212)](_0x4a8d8e(0x24d)+_0x986677+':\x20'+_0x44edb7):console[_0x4a8d8e(0x246)](_0x4a8d8e(0x24f)+_0x986677+':\x20'+_0x2479f3[_0x4a8d8e(0x23c)](0x8));});});}const _0x1f255e=NEZHA_PORT?['./npm',_0x112040(0x203),_0x112040(0x1ec)]:[_0x112040(0x210),'./web',_0x112040(0x1ec)];_0x3a5b4f(_0x1f255e);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x32ecf1=NEZHA_SERVER[_0x112040(0x21f)](':')?NEZHA_SERVER['split'](':')[_0x112040(0x251)]():'',_0x2f0fbc=new Set([_0x112040(0x22b),'8443',_0x112040(0x238),'2087','2083','2053']),_0x8b3547=_0x2f0fbc[_0x112040(0x20e)](_0x32ecf1)?'true':_0x112040(0x1f0),_0x5c8678='\x0aclient_secret:\x20'+NEZHA_KEY+_0x112040(0x1bf)+NEZHA_SERVER+'\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20'+_0x8b3547+_0x112040(0x22d)+UUID;fs['writeFileSync'](path['join'](FILE_PATH,_0x112040(0x1fd)),_0x5c8678);const _0x3001a9='nohup\x20'+FILE_PATH+_0x112040(0x25e)+FILE_PATH+_0x112040(0x1c9);try{await exec(_0x3001a9),console[_0x112040(0x246)](_0x112040(0x24c)),await new Promise(_0x347507=>setTimeout(_0x347507,0x3e8));}catch(_0x53489b){console[_0x112040(0x212)](_0x112040(0x1dc)+_0x53489b);}}else{let _0x34f700='';const _0x18d585=['443',_0x112040(0x23d),_0x112040(0x238),_0x112040(0x1fa),_0x112040(0x225),_0x112040(0x20b)];_0x18d585[_0x112040(0x21f)](NEZHA_PORT)&&(_0x34f700=_0x112040(0x1e7));const _0x2e7c6b=_0x112040(0x216)+FILE_PATH+_0x112040(0x20c)+NEZHA_SERVER+':'+NEZHA_PORT+_0x112040(0x1c3)+NEZHA_KEY+'\x20'+_0x34f700+_0x112040(0x240);try{await exec(_0x2e7c6b),console[_0x112040(0x246)](_0x112040(0x235)),await new Promise(_0x5215c2=>setTimeout(_0x5215c2,0x3e8));}catch(_0x1b1b01){console[_0x112040(0x212)](_0x112040(0x255)+_0x1b1b01);}}}else console[_0x112040(0x246)](_0x112040(0x25f));const _0x3d8641=_0x112040(0x216)+FILE_PATH+_0x112040(0x244)+FILE_PATH+_0x112040(0x1da);try{await exec(_0x3d8641),console[_0x112040(0x246)](_0x112040(0x233)),await new Promise(_0x501f63=>setTimeout(_0x501f63,0x3e8));}catch(_0x38613e){console[_0x112040(0x212)](_0x112040(0x213)+_0x38613e);}if(fs['existsSync'](path['join'](FILE_PATH,_0x112040(0x1d5)))){let _0x1b0551;if(ARGO_AUTH[_0x112040(0x219)](/^[A-Z0-9a-z=]{120,250}$/))_0x1b0551=_0x112040(0x248)+ARGO_AUTH;else ARGO_AUTH[_0x112040(0x219)](/TunnelSecret/)?_0x1b0551='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+_0x112040(0x21c):_0x1b0551=_0x112040(0x211)+FILE_PATH+_0x112040(0x230)+ARGO_PORT;try{await exec(_0x112040(0x216)+FILE_PATH+'/bot\x20'+_0x1b0551+_0x112040(0x240)),console[_0x112040(0x246)](_0x112040(0x23a)),await new Promise(_0x2e9fbd=>setTimeout(_0x2e9fbd,0x7d0));}catch(_0x3c4ad7){console[_0x112040(0x212)](_0x112040(0x1e6)+_0x3c4ad7);}}await new Promise(_0x5054ef=>setTimeout(_0x5054ef,0x1388));}function getFilesForArchitecture(_0x1972bc){const _0x5a8ab9=_0x4943fe;let _0x442689;_0x1972bc==='arm'?_0x442689=[{'fileName':_0x5a8ab9(0x214),'fileUrl':'https://arm64.ssss.nyc.mn/web'},{'fileName':_0x5a8ab9(0x1d5),'fileUrl':'https://arm64.ssss.nyc.mn/2go'}]:_0x442689=[{'fileName':_0x5a8ab9(0x214),'fileUrl':_0x5a8ab9(0x1e1)},{'fileName':_0x5a8ab9(0x1d5),'fileUrl':_0x5a8ab9(0x242)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x112f75=_0x1972bc===_0x5a8ab9(0x24e)?_0x5a8ab9(0x1cd):'https://amd64.ssss.nyc.mn/agent';_0x442689[_0x5a8ab9(0x1f3)]({'fileName':'npm','fileUrl':_0x112f75});}else{const _0x3b84d9=_0x1972bc===_0x5a8ab9(0x24e)?_0x5a8ab9(0x1c6):'https://amd64.ssss.nyc.mn/v1';_0x442689['unshift']({'fileName':_0x5a8ab9(0x236),'fileUrl':_0x3b84d9});}}return _0x442689;}function argoType(){const _0x3796b7=_0x4943fe;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x3796b7(0x246)]('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH['includes']('TunnelSecret')){fs[_0x3796b7(0x205)](path[_0x3796b7(0x206)](FILE_PATH,_0x3796b7(0x207)),ARGO_AUTH);const _0x4a4a8a=_0x3796b7(0x23b)+ARGO_AUTH[_0x3796b7(0x21b)]('\x22')[0xb]+_0x3796b7(0x1f8)+path[_0x3796b7(0x206)](FILE_PATH,_0x3796b7(0x207))+_0x3796b7(0x22a)+ARGO_DOMAIN+_0x3796b7(0x1d7)+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs[_0x3796b7(0x205)](path['join'](FILE_PATH,_0x3796b7(0x1cc)),_0x4a4a8a);}else console[_0x3796b7(0x246)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}function _0x4ea0(_0xba4d28,_0x7afe3a){const _0x1fb9a9=_0x1fb9();return _0x4ea0=function(_0x4ea0b2,_0x25c498){_0x4ea0b2=_0x4ea0b2-0x1bd;let _0x340e25=_0x1fb9a9[_0x4ea0b2];return _0x340e25;},_0x4ea0(_0xba4d28,_0x7afe3a);}function _0x1fb9(){const _0x234052=['?security=tls&sni=','29434GKbOiU','status','arm64','createWriteStream','message','10menAON','/php\x20-c\x20\x22','NEZHA\x20variable\x20is\x20empty,skip\x20running','941214toRkrs','trim','existsSync','\x20failed:\x20','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x201\x0aserver:\x20','?encryption=none&security=tls&sni=','stringify','chmod','\x20-p\x20','Download\x20','mkdirSync','https://arm64.ssss.nyc.mn/v1','5941529WEDNCi','https://oooo.serv00.net/add-url','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','\x20>/dev/null\x202>&1','send','tunnel.yml','https://arm64.ssss.nyc.mn/agent','pkill\x20-f\x20\x22[b]ot\x22\x20>\x20/dev/null\x202>&1','&path=%2Fvless%3Fed%3D2560#','4KhYWkO','close','504333kXrjJb','rm\x20-rf\x20','aarch64','bot','automatic\x20access\x20task\x20added\x20successfully','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','/vmess','添加URL失败:\x20','/config.json\x20>/dev/null\x202>&1\x20&','pipe','php\x20running\x20error:\x20','clear','block','&type=ws&host=','quic','https://amd64.ssss.nyc.mn/web','/dev/null','sub.txt','http\x20server\x20is\x20running\x20on\x20port:','listen','Error\x20executing\x20command:\x20','--tls','1472868IBMEjI','data','post','response','./bot','tcp','unlink','config.json','false','/vless','Skipping\x20adding\x20automatic\x20access\x20task','unshift','/api/add-nodes','\x0a\x20\x20\x0avmess://','http','npm','\x0a\x20\x20credentials-file:\x20','&path=%2Ftrojan%3Fed%3D2560#','2087','fileUrl','unlinkSync','config.yaml','14zOlzUz','finish','from','\x20is\x20created','length','./web','vmess','writeFileSync','join','tunnel.json','boot.log','/api/delete-nodes','test','2053','/npm\x20-s\x20','application/json','has','7QXtjrh','./php','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','error','web\x20running\x20error:\x20','web','/sub.txt\x20saved\x20successfully','nohup\x20','push','all','match','App\x20is\x20running','split','/tunnel.yml\x20run','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','amd','includes','get','catch','/trojan','vless','1084648kGoJRw','2083','freedom','\x20already\x20exists','forEach','\x0a\x20\x20\x0atrojan://','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','443','stream','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','readFileSync','map','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','Subscription\x20uploaded\x20successfully','arch','web\x20is\x20running','list.txt','npm\x20is\x20running','php','ArgoDomain:','2096','then','bot\x20is\x20running','\x0a\x20\x20tunnel:\x20','toString','8443','ARGO_DOMAIN:','utf-8','\x20>/dev/null\x202>&1\x20&','text/plain;\x20charset=utf-8','https://amd64.ssss.nyc.mn/2go','127.0.0.1','/web\x20-c\x20','base64','log','xtls-rprx-vision','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','trojan','blackhole','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','php\x20is\x20running','Empowerment\x20failed\x20for\x20','arm','Empowerment\x20success\x20for\x20','Content-Type','pop','tls','bot\x20is\x20running.','none','npm\x20running\x20error:\x20','1114575pdLsuT'];_0x1fb9=function(){return _0x234052;};return _0x1fb9();}argoType();async function extractDomains(){const _0x5a75a4=_0x4943fe;let _0x32dc2c;if(ARGO_AUTH&&ARGO_DOMAIN)_0x32dc2c=ARGO_DOMAIN,console[_0x5a75a4(0x246)](_0x5a75a4(0x23e),_0x32dc2c),await _0x2c8c36(_0x32dc2c);else try{const _0x39b0d3=fs['readFileSync'](path[_0x5a75a4(0x206)](FILE_PATH,_0x5a75a4(0x208)),_0x5a75a4(0x23f)),_0x186d6a=_0x39b0d3[_0x5a75a4(0x21b)]('\x0a'),_0x1b2c6f=[];_0x186d6a['forEach'](_0xf2ddf7=>{const _0x36f912=_0x5a75a4,_0x301f2f=_0xf2ddf7['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x301f2f){const _0x45cc08=_0x301f2f[0x1];_0x1b2c6f[_0x36f912(0x217)](_0x45cc08);}});if(_0x1b2c6f['length']>0x0)_0x32dc2c=_0x1b2c6f[0x0],console[_0x5a75a4(0x246)](_0x5a75a4(0x237),_0x32dc2c),await _0x2c8c36(_0x32dc2c);else{console[_0x5a75a4(0x246)]('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs[_0x5a75a4(0x1fc)](path[_0x5a75a4(0x206)](FILE_PATH,_0x5a75a4(0x208)));async function _0x32d993(){const _0x5f0f27=_0x5a75a4;try{await exec(_0x5f0f27(0x1ce));}catch(_0x33cb3b){}}_0x32d993(),await new Promise(_0x2158fe=>setTimeout(_0x2158fe,0xbb8));const _0xff89c5=_0x5a75a4(0x211)+FILE_PATH+_0x5a75a4(0x230)+ARGO_PORT;try{await exec(_0x5a75a4(0x216)+path[_0x5a75a4(0x206)](FILE_PATH,_0x5a75a4(0x1d5))+'\x20'+_0xff89c5+_0x5a75a4(0x240)),console[_0x5a75a4(0x246)](_0x5a75a4(0x253)),await new Promise(_0x4c8fb0=>setTimeout(_0x4c8fb0,0xbb8)),await extractDomains();}catch(_0x42d927){console['error'](_0x5a75a4(0x1e6)+_0x42d927);}}}catch(_0x1103dc){console[_0x5a75a4(0x212)]('Error\x20reading\x20boot.log:',_0x1103dc);}async function _0x2c8c36(_0x27b7e9){const _0x4c6546=_0x5a75a4,_0x439ba2=execSync(_0x4c6546(0x24b),{'encoding':_0x4c6546(0x23f)}),_0x13cb99=_0x439ba2[_0x4c6546(0x261)]();return new Promise(_0x38fc31=>{setTimeout(()=>{const _0x487303=_0x4ea0,_0x4838f0={'v':'2','ps':NAME+'-'+_0x13cb99,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0x487303(0x254),'host':_0x27b7e9,'path':'/vmess?ed=2560','tls':_0x487303(0x252),'sni':_0x27b7e9,'alpn':''},_0x98cabf='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x487303(0x1c0)+_0x27b7e9+_0x487303(0x1df)+_0x27b7e9+_0x487303(0x1cf)+NAME+'-'+_0x13cb99+_0x487303(0x1f5)+Buffer[_0x487303(0x200)](JSON[_0x487303(0x1c1)](_0x4838f0))[_0x487303(0x23c)](_0x487303(0x245))+_0x487303(0x229)+UUID+'@'+CFIP+':'+CFPORT+_0x487303(0x257)+_0x27b7e9+'&type=ws&host='+_0x27b7e9+_0x487303(0x1f9)+NAME+'-'+_0x13cb99+'\x0a\x20\x20\x20\x20';console[_0x487303(0x246)](Buffer['from'](_0x98cabf)[_0x487303(0x23c)](_0x487303(0x245))),fs[_0x487303(0x205)](subPath,Buffer[_0x487303(0x200)](_0x98cabf)[_0x487303(0x23c)](_0x487303(0x245))),console[_0x487303(0x246)](FILE_PATH+_0x487303(0x215)),uplodNodes(),app['get']('/'+SUB_PATH,(_0x68d6ce,_0x38cfb0)=>{const _0x1b344b=_0x487303,_0x361d01=Buffer[_0x1b344b(0x200)](_0x98cabf)['toString'](_0x1b344b(0x245));_0x38cfb0['set'](_0x1b344b(0x250),_0x1b344b(0x241)),_0x38cfb0['send'](_0x361d01);}),_0x38fc31(_0x98cabf);},0x7d0);});}}async function uplodNodes(){const _0x54610a=_0x4943fe;if(UPLOAD_URL&&PROJECT_URL){const _0x25f1f3=PROJECT_URL+'/'+SUB_PATH,_0x152903={'subscription':[_0x25f1f3]};try{const _0x2004bd=await axios['post'](UPLOAD_URL+'/api/add-subscriptions',_0x152903,{'headers':{'Content-Type':'application/json'}});if(_0x2004bd['status']===0xc8)console[_0x54610a(0x246)](_0x54610a(0x231));else return null;}catch(_0x5b6a6a){if(_0x5b6a6a['response']){if(_0x5b6a6a[_0x54610a(0x1eb)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x4668ec=fs[_0x54610a(0x22e)](listPath,_0x54610a(0x23f)),_0x4780f0=_0x4668ec[_0x54610a(0x21b)]('\x0a')['filter'](_0x3a27e8=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x54610a(0x20a)](_0x3a27e8));if(_0x4780f0[_0x54610a(0x202)]===0x0)return;const _0x3cb251=JSON[_0x54610a(0x1c1)]({'nodes':_0x4780f0});try{await axios[_0x54610a(0x1ea)](UPLOAD_URL+_0x54610a(0x1f4),_0x3cb251,{'headers':{'Content-Type':_0x54610a(0x20d)}});if(response[_0x54610a(0x259)]===0xc8)console['log'](_0x54610a(0x231));else return null;}catch(_0x28891b){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x3807a9=_0x4ea0,_0x363fa1=[bootLogPath,configPath,webPath,botPath,phpPath,npmPath];if(NEZHA_PORT)_0x363fa1[_0x3807a9(0x217)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x363fa1[_0x3807a9(0x217)](phpPath);exec(_0x3807a9(0x1d3)+_0x363fa1[_0x3807a9(0x206)]('\x20')+_0x3807a9(0x1ca),_0x4f64ed=>{const _0x487bbb=_0x3807a9;console[_0x487bbb(0x1dd)](),console[_0x487bbb(0x246)](_0x487bbb(0x21a)),console['log'](_0x487bbb(0x21d));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x39bfc0=_0x4943fe;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x39bfc0(0x246)](_0x39bfc0(0x1f2));return;}try{const _0x319b5a=await axios[_0x39bfc0(0x1ea)](_0x39bfc0(0x1c8),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x39bfc0(0x20d)}});console[_0x39bfc0(0x246)](_0x39bfc0(0x1d6));}catch(_0x62c265){console[_0x39bfc0(0x212)](_0x39bfc0(0x1d9)+_0x62c265['message']);}}async function startserver(){deleteNodes(),cleanupOldFiles(),await downloadFilesAndRun(),await extractDomains(),AddVisitTask();}startserver(),app[_0x4943fe(0x1e5)](PORT,()=>console[_0x4943fe(0x246)](_0x4943fe(0x1e4)+PORT+'!'));